<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GTM Server-Side POC</title>

  <!-- GTM Web Container -->
  <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];
      w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),
          dl=l!='dataLayer'?'&l='+l:'';
      j.async=true;
      j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-W2S48T2V');
  </script>

  <script>
    fetch('https://server-side-tagging-hdzbfcpfsq-uc.a.run.app', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({
    event_name: 'hello_server_gtm',
    source: 'poc'
  })
})
  </script>
</head>

<body>
  <h1>GTM Server-Side POC</h1>
  <p>Simple website for event tracking</p>

  <button id="btn">Click Me</button>

  <script>
    document.getElementById("btn").addEventListener("click", function () {
      dataLayer.push({
        event: "button_click",
        button_name: "click_me",
        user_id: "user_123"
      });
    });
  </script>

  
</body>
</html>


